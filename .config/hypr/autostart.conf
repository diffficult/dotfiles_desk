# ============================================================================
# HYPRLAND AUTOSTART CONFIGURATION
# ============================================================================
# exec-once commands run once at startup
# exec commands run on every reload (less common)
#
# For critical daemons, use exec-once
# For UI apps, use exec-once
# Most configs only use exec-once
#
# Tips:
#   - Use '&' or '&>' for backgrounding/silencing
#   - Use '|| true' to ignore failures
#   - Start daemons early (polkit, notification daemon, etc.)
#   - Start user-facing apps later

# Critical desktop daemons (start first)

# Load Hyprland plugins (MUST be before keybindings are evaluated)
# This ensures plugin dispatchers (like overview:toggle) are available
exec-once = hyprpm reload -n &

# Polkit authentication agent - required for privilege escalation
# Choose one that matches your desktop environment
exec-once = /usr/lib/polkit-gnome/polkit-gnome-authentication-agent-1 &
# Alternative for KDE:
# exec-once = /usr/lib/polkit-kde-authentication-agent-1 &

# Keyring daemon - manages SSH/GPG keys and credentials
exec-once = eval $(gnome-keyring-daemon --start) &
# Alternative (if gnome-keyring not available):
# exec-once = /usr/bin/gnome-keyring-daemon --start &

# Notification daemon - shows desktop notifications
# Choose one: mako (lightweight, Wayland-native) or dunst or swaync
# exec-once = mako &
exec-once = uwsm app -- swaync
# Alternative:
# exec-once = dunst &

# XDG Desktop Portal - required for file choosers, screenshot tools, etc. on Wayland
exec-once = /usr/libexec/xdg-desktop-portal-hyprland &
exec-once = /usr/libexec/xdg-desktop-portal &

# Network Manager UI (for WiFi/networking)
# exec-once = nm-applet &

# Bluetooth applet (if you use Bluetooth)
# exec-once = blueman-applet &

# Auto-switch to Bluetooth audio device on connect (works with PulseAudio/PipeWire)
exec-once = pactl load-module module-switch-on-connect &

# Clipboard manager (for clipboard history)
exec-once = uwsm app -- clipse -listen

# Optional UI/visual daemons

# Status bar / panel - Waybar is the recommended choice for Hyprland
exec-once = uwsm app -- waybar

# Wallpaper daemon - using swww (Wayland wallpaper daemon)
exec-once = swww-daemon &
# Set initial wallpaper (uncomment and adjust path)
# exec-once = swww img ~/.config/hypr/wallpapers/default.jpg &
# For animated/video wallpaper with mpvpaper (optional)
# exec-once = mpvpaper -vs '*' ~/.config/hypr/wallpapers/animated.mp4 &

# Lock screen - hyprlock is started on-demand via screensaver script
# Idle daemon - handles idle timeouts and screen locking
exec-once = uwsm app -- hypridle

# Geoclue location service agent (required for location-based apps like gammastep)
exec-once = uwsm app -- /usr/lib/geoclue-2.0/demos/agent

# Night light / color temperature daemon (Wayland replacement for redshift)
# Using gammastep-indicator from XDG autostart instead (provides GUI controls)
# exec-once = uwsm app -- gammastep  # Using geoclue2 for automatic location detection

# User applications (from XFCE autostart)

# Status notifier for system tray (using tray from waybar)
#exec-once = dfl-status-notifier &

# Hyprswitch daemon (Window switcher)
# exec-once = hyprswitch init &

# Hyprshell daemon (Window switcher/launcher)
# Runs as a service via systemctl
# exec-once = hyprshell run &

# OpenRGB - RGB lighting control
#exec-once = openrgb --startminimized --profile "default-chroma-off" & # this doesn't work.
#exec-once = openrgb --startminimized &
exec-once = (sleep 10 && uwsm app -- openrgb --startminimized --profile default) &

# Cloud storage sync clients
exec-once = uwsm app -- dropbox &
exec-once = uwsm app -- env QT_QPA_PLATFORM=xcb megasync &  # MEGAsync via XWayland

# File synchronization
exec-once = uwsm app -- syncthing-gtk &

# Optional user applications

# Launch preferred terminal (uncomment if you want it at startup)
# exec-once = kitty &

# Launch file manager (uncomment if you want it at startup)
# exec-once = nemo &

# Launch browser (uncomment if you want it at startup)
# exec-once = zen-browser &

# IDE/text editor (uncomment if you want it at startup)
# exec-once = code &

# Custom startup scripts
# Place any custom shell scripts here that you want to run at startup
# exec-once = ~/.config/hypr/scripts/setup.sh &

# ============================================================================
# ELECOM Huge TrackBall Button Remapping (Choose ONE method)
# See TRACKBALL_SETUP.md for detailed instructions
# ============================================================================

# Method 1: input-remapper (Recommended - GUI tool)
# Install: yay -S input-remapper-git
# Configure: input-remapper-gtk
# Enable service: systemctl --user enable --now input-remapper
# exec-once = input-remapper-control --command autoload &

# Method 2: evsieve (Command-line - requires setup)
# Install: yay -S evsieve
# Note: Requires sudo or input group membership
exec-once = ~/.local/bin/hypr_scripts/remap-trackball.sh &

# Foot terminal server (for footclient instances)
# Managed by systemd user units (recommended).
# - Start at session boot:
#     systemctl --user enable --now foot-server.service
# - Or socket-activate (server starts on first footclient connection):
#     systemctl --user enable --now foot-server.socket
#
# NOTE: the systemd socket unit listens on:
#   $XDG_RUNTIME_DIR/foot.sock
# so use:
#   footclient -s "$XDG_RUNTIME_DIR/foot.sock" ...
#
# (Old Hyprland-managed method; keep disabled to avoid duplicates)
# exec-once = uwsm app -- foot --server
