# ============================================================================
# HYPRLAND WINDOW RULES CONFIGURATION
# ============================================================================
# Reference: https://wiki.hypr.land/Configuring/Window-Rules/
# Syntax: windowrule { name = rule-name; match:prop = value; effect = value; }
#
# Rules are processed top-to-bottom; later rules override earlier ones.
# Use 'hyprctl clients' to find window class/title for rules.
#
# Application-specific rules are organized in apps/ directory.
# This file contains only core rules, generic patterns, and tag-based rules.

# ============================================================================
# CORE RULES & STABILITY
# ============================================================================

# Suppress maximize requests from apps (recommended for tiling)
windowrule = match:class .*, suppress_event maximize

# Fix XWayland dragging issues with certain windows
windowrule = match:class ^$, match:title ^$, match:xwayland 1, match:float 1, match:fullscreen 0, match:pin 0, no_focus on

# ============================================================================
# TAG-BASED RULES (Applied via tags from app configs)
# ============================================================================

# Remove borders for apps tagged with +no-border
windowrule {
  name = tag-no-border
  match:tag = +no-border

  border_size = 0
}

# Make media windows opaque (already in system-utilities.conf but here for clarity)
windowrule {
  name = tag-media-opaque
  match:tag = +media

  opaque = on
}

# Password managers: prevent screen sharing
windowrule {
  name = tag-password-manager-security
  match:tag = +password-manager

  no_screen_share = on
}

# ============================================================================
# WINDOW TYPES (Dialogs, Popups, Generic Patterns)
# ============================================================================

# Standard file dialogs
windowrule {
  name = file-dialogs-float
  match:title = ^(Open File|Save File|Save As|Open Document)$

  float = on
  center = on
  border_size = 0
}

# About dialogs
windowrule {
  name = about-dialogs-float
  match:title = ^(About ).*$

  float = on
}

# File progress windows
windowrule {
  name = file-progress-float
  match:class = ^(file_progress)$

  float = on
}

# Generic picker/dialog/preferences windows
windowrule {
  name = generic-dialogs-float
  match:class = ^(.*-picker|.*-dialog|.*-preferences)$

  float = on
}

# Zenity dialogs
windowrule {
  name = zenity-no-border
  match:class = ^(zenity)$

  border_size = 0
}

# Generic window roles/types
windowrule {
  name = generic-window-types-float
  match:title = ^(pop-up|task_dialog|bubble|dialog|menu|Preferences)$

  float = on
}

# ============================================================================
# TERMINAL FLOAT VARIANTS
# ============================================================================
# Note: Main terminal rules are in apps/terminals.conf
# These are for specific floating variants

# foot terminal float rules
windowrule {
  name = footclient-float
  match:class = ^(footclient-float.*)$

  float = on
  center = on
}

windowrule {
  name = footclient-cpu
  match:title = ^(CPU.*)$

  size = 900 720
}

windowrule {
  name = footclient-weather
  match:title = ^(Weather.*)$

  size = 924 1196
}

windowrule {
  name = footclient-yay
  match:title = ^(yay.*)$

  size = 800 760
}

# St/kitty floating variants
windowrule {
  name = st-floating-variants
  match:class = ^(St|drawn-st|floating-kitty|floating_update)$

  float = on
}

windowrule {
  name = st-title-float
  match:class = ^(st)$
  match:title = ^(st)$

  float = on
}

# ============================================================================
# WAYBAR UTILITIES
# ============================================================================

windowrule {
  name = waybar-manager-float
  match:class = ^(waybar-manager)$

  float = on
  size = 800 600
  center = on
}

windowrule {
  name = waybar-floating-widgets
  match:class = ^(floating-waybar-(cpu|weather|pacman|calendar))$

  float = on
  center = on
}

# ============================================================================
# WORKSPACE ASSIGNMENTS (Consolidated)
# ============================================================================
# Note: Most workspace assignments are now in individual app config files.
# These are consolidated here for quick reference and overview.

# Workspace 1: Primary Browser (Zen)
# See: apps/browsers.conf

# Workspace 2: Terminals
windowrule {
  name = terminals-workspace-2
  match:class = ^(Xfce4-terminal|Alacritty)$

  workspace = 2
}

windowrule {
  name = kitty-floating-workspace-2
  match:class = ^(kitty)$

  float = on
  workspace = 2
  size = 1386 1373
  move = 1160 53
}

windowrule {
  name = wezterm-workspace-8
  match:class = ^(wezterm|Wezterm)$

  workspace = 8
}

# Workspace 3: File Managers
# See: apps/file-managers.conf

# Workspace 4: Development
# See: apps/development.conf

# Workspace 5: Secondary Browsers & Password Managers
# See: apps/browsers.conf and apps/password-managers.conf

# Workspace 6: Office & Creative
# See: apps/system-utilities.conf

# Workspace 7: Media Viewers
# See: apps/media.conf

# Workspace 9: Communication
# See: apps/communication.conf

# Workspace 10: VMs & System Tools
# See: apps/system-utilities.conf

# ============================================================================
# LEGACY RULES (COMMENTED OUT - MIGRATED TO APPS/)
# ============================================================================
# The following rules have been migrated to organized app config files.
# Keeping them commented here temporarily for reference.

# --- Picture-in-Picture ---
# Migrated to: apps/pip.conf
#windowrule = match:title ^(Picture-in-Picture)$, float on, pin on, size 1210 679, workspace 1, move 14 747

# --- Browsers ---
# Migrated to: apps/browsers.conf
#windowrule = match:class ^(Navigator|zen)$, match:title (?i)Comprobante, stay_focused on
#windowrule = match:class ^(zen|Zen)$, workspace 1
#windowrule = match:class ^(Google-chrome|google-chrome|Chromium|chromium)$, workspace 5 
#windowrule = match:class ^(brave-browser|Brave-browser)$, workspace 5
#windowrule = match:class ^(Firefox|firefox)$, border_size 0
#windowrule = match:class ^(Chrome|chrome|Chromium|chromium)$, border_size 0
#windowrule = match:class ^(zen|Navigator)$, border_size 0

# --- File Managers ---
# Migrated to: apps/file-managers.conf
#windowrule = match:class ^(nemo|nautilus|caja|thunar)$, match:title ^(Browse)$, float on
#windowrule = match:class ^(nemo|nautilus)$, size 1200 700, center on
#windowrule = match:class ^(org\.gnome\.FileRoller)$, float on, center on
#windowrule = match:class ^(nautilus|Nautilus|nemo|Nemo)$, float on
#windowrule = match:class ^(org\.gnome\.sushi)$, float on, center on, stay_focused on
#windowrule = match:class ^(imv|nemo-preview)$, float on, center on, stay_focused on
#windowrule = match:class ^(swayimg.*)$, float on, center on, stay_focused on
#windowrule = match:class ^(Nautilus|nautilus|Nemo|nemo|Thunar|thunar)$, workspace 3

# --- Media & Players ---
# Migrated to: apps/media.conf
#windowrule = match:title (ncmpcpp), float on, size 1200 676, move 13 755
#windowrule = match:class ^(mpv|Mpv)$, float on, opacity 1.0 1.0
#windowrule = match:title ^(watch\?v.*)$, size 1210 679, workspace 2, move 14 747
#windowrule = match:title ^(720p stream.*)$, workspace special:scratchpad silent
#windowrule = match:title ^(1080p stream.*)$, workspace special:scratchpad silent
#windowrule = match:title ^(101)$, size 1210 679, workspace 2, move 14 53
#windowrule = match:class ^(Spotify|spotify)$, workspace 5
#windowrule = match:class ^(Gpicview|gpicview|Zathura|zathura|swayimg_.*)$, workspace 7

# --- System Utilities ---
# Migrated to: apps/system-utilities.conf
#windowrule = match:class ^(mako|dunst)$, no_focus on
#windowrule = match:title ^(Notification)$, no_focus on
#windowrule = match:initial_class ^(org\.openrgb\.OpenRGB)$, float on, center on, size 1142 560
#windowrule = match:class ^(org\.pulseaudio\.pavucontrol|pavucontrol|Pavucontrol)$, float on
#windowrule = match:class ^(org\.pulseaudio\.pavucontrol)$, center on, size 1000 800
#windowrule = match:class ^(pavucontrol|Pavucontrol)$, workspace special:scratchpad silent
#windowrule = match:class ^(blueman-manager|Blueman-manager)$, float on, center on, size 600 680
#windowrule = match:class ^(nm-connection-editor)$, float on, center on, size 600 500
#windowrule = match:class ^(qt5ct)$, float on, center on, size 600 680
#windowrule = match:class ^(gsimplecal)$, float on, move cursor -34 0
#windowrule = match:class ^(seahorse|Seahorse)$, float on
#windowrule = match:class ^(protonvpn)$, float on
#windowrule = match:class ^(polychromatic)$, float on, center on, size 1000 500
#windowrule = match:class ^(syncthing-gtk)$, float on, center on, size 900 700
#windowrule = match:class ^(org\.gnome\.Software)$, float on, center on, size 1100 1000
#windowrule = match:class ^(nvidia-settings)$, float on, center on, size 1050 750
#windowrule = match:class ^(libreoffice.*|Gimp|gimp)$, workspace 6
#windowrule = match:class ^(Virt-manager|virt-manager|RustDesk|rustdesk|protonvpn|winboat|Winboat)$, workspace 10

# --- Development ---
# Migrated to: apps/development.conf
#windowrule = match:class ^(code|Code|code-oss|Subl|subl|Sublime_text|.*zed.*)$, workspace 4
#windowrule = match:class ^(Sublime_text|Subl|subl)$, border_size 0
#windowrule = match:class ^(.*zed.*)$, border_size 0

# --- Communication ---
# Migrated to: apps/communication.conf
#windowrule = match:class ^(TelegramDesktop|telegramdesktop|localsend|LocalSend)$, workspace 9
#windowrule = match:class ^(whatsie|Whatsie|rustdesk|RustDesk)$, float on
#windowrule = match:class ^(TelegramDesktop|telegramdesktop)$, border_size 0
#windowrule = match:class ^(discord)$, border_size 0

# --- Password Managers ---
# Migrated to: apps/password-managers.conf
#windowrule = match:class ^(Brave-browser|brave-browser|Keepass|keepassx2|keepassxc)$, workspace 5

# --- Gaming ---
# Migrated to: apps/gaming.conf (new file replacing steam.conf and retroarch.conf)
#windowrule = match:class ^(steam|Steam)$, float on, size 960 640
#windowrule = match:class ^(steam_app_.*|cs2)$, immediate on
#windowrule = match:class ^(steam_app_.*)$, fullscreen on
