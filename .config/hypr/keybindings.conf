# ============================================================================
# HYPRLAND KEYBINDINGS
# Converted from i3 config
# ============================================================================
# For full binding documentation: https://wiki.hypr.land/Configuring/Binds/
#
# Modifier keys: SUPER (Windows), SHIFT, CTRL, ALT
# Special keys: Return (Enter), Escape, Tab, Print, etc.
# Mouse buttons: mouse:272 (LMB), mouse:273 (RMB), mouse:274 (MMB)
#
# Binding types:
#   bind = regular key press
#   bindl = locked (works even with locks active)
#   bindel = with repeat (key can be held down)
#   binde = holds until key is released
#   bindm = mouse bindings
#
# Key naming: Use 'xev' or check Hyprland wiki for exact key names.

# Modifier key definitions
$mainMod = SUPER
$altMod = ALT

# ============================================================================
# WORKSPACE KEYBINDINGS
# ============================================================================

# Switch to workspace
bind = $mainMod, 1, workspace, 1
bind = $mainMod, 2, workspace, 2
bind = $mainMod, 3, workspace, 3
bind = $mainMod, 4, workspace, 4
bind = $mainMod, 5, workspace, 5
bind = $mainMod, 6, workspace, 6
bind = $mainMod, 7, workspace, 7
bind = $mainMod, 8, workspace, 8
bind = $mainMod, 9, workspace, 9
bind = $mainMod, 0, workspace, 10

# Move container to workspace
bind = $mainMod SHIFT, 1, movetoworkspace, 1
bind = $mainMod SHIFT, 2, movetoworkspace, 2
bind = $mainMod SHIFT, 3, movetoworkspace, 3
bind = $mainMod SHIFT, 4, movetoworkspace, 4
bind = $mainMod SHIFT, 5, movetoworkspace, 5
bind = $mainMod SHIFT, 6, movetoworkspace, 6
bind = $mainMod SHIFT, 7, movetoworkspace, 7
bind = $mainMod SHIFT, 8, movetoworkspace, 8
bind = $mainMod SHIFT, 9, movetoworkspace, 9
bind = $mainMod SHIFT, 0, movetoworkspace, 10

# ============================================================================
# CORE KEYBINDINGS
# ============================================================================

# Scratchpad (using special workspace)
bind = $mainMod SHIFT, minus, movetoworkspace, special
bind = $mainMod, minus, togglespecialworkspace

# Emergency lockscreen (fallback - use if video lock fails)
bind = $mainMod CTRL ALT, L, exec, ~/.local/bin/hypr_scripts/emergency-lock.sh

# Lock screen using swaylock with video screensaver
# bind = $mainMod CTRL, L, exec, ~/.local/bin/hypr_scripts/run-screensaver.sh
bind = $mainMod CTRL, L, exec, ~/.local/bin/hypr_scripts/aerial-hyprlock.sh

# Simple lock (hyprlock with screenshot)
bind = $mainMod SHIFT CTRL, L, exec, ~/.local/bin/hypr_scripts/lock-fallback.sh

# Terminal
bind = $mainMod, Return, exec, uwsm app -- kitty
# bind = $mainMod SHIFT, Return, exec, ~/.config/i3/bin/i3term.sh --float   # Uncomment if script exists
# bind = $mainMod $altMod, Return, exec, ~/.config/i3/bin/i3term.sh --full  # Uncomment if script exists

# Kill focused window
bind = $mainMod SHIFT, Q, killactive

# GUI Applications (File manager)
bind = $mainMod SHIFT, F, exec, uwsm app -- nemo

# AI Assistants
bind = $mainMod, G, exec, uwsm app -- gtk-launch Grok

# ============================================================================
# ROFI LAUNCHERS
# ============================================================================

# Application launcher (combi mode: drun + run + window)
bind = $mainMod, D, exec, uwsm app -- rofi -show combi

# Password manager (rofi-pass)
bind = $mainMod, P, exec, uwsm app -- rofi-pass

# Clipboard manager (clipse)
# Install: yay -S clipse
# Enable daemon in autostart.conf: exec-once = uwsm app -- clipse -listen
bind = $mainMod, Y, exec, uwsm app -- footclient -s "$XDG_RUNTIME_DIR/foot.sock" -a clipse-float --title clipse clipse

# Window switcher
bind = $mainMod, bracketright, exec, uwsm app -- rofi -show window

# Network menu (optional - requires custom script)
# bind = $mainMod, N, exec, ~/.config/rofi/bin/network_menu

# Translation tool (optional - requires custom script)
# bind = $mainMod, M, exec, ~/.local/bin/rofi-trans.sh

# Emoji picker (requires rofimoji or rofi-emoji)
# Install: yay -S rofimoji
bind = $mainMod, period, exec, uwsm app -- rofimoji --action copy

# Bluetooth manager (requires rofi-bluetooth)
# Install: yay -S rofi-bluetooth
bind = $mainMod SHIFT, B, exec, uwsm app -- rofi-bluetooth

# Calculator (requires rofi-calc)
# Install: yay -S rofi-calc
bind = $mainMod, C, exec, uwsm app -- rofi -show calc -modi calc -no-show-match -no-sort

# Walker - Application launcher and config tool
# Install: yay -S walker-git
bind = $mainMod, W, exec, uwsm app -- zen-browser

# Screenshots (grim + slurp + wl-copy + dunstify)
# (Old binding; retired)
# # bind = $mainMod SHIFT, /, exec, grim -g "$(slurp)" ~/Pictures/Screenshots/screenshot-$(date +%Y-%m-%d_%H-%M-%S).png && notify-send -t 2500 'Screenshot Taken'

# REGION  file + clipboard
# bind = $mainMod, S, exec, sh -lc 'dir="$HOME/Pictures/Screenshots"; mkdir -p "$dir"; file="$dir/Screenshot-region-$(date +%F_%H-%M-%S).png"; grim -g "$(slurp)" "$file" && wl-copy < "$file" && dunstify "Screenshot (region)" "$file" -t 3000'
bind = $mainMod, S, exec, ~/.local/bin/hypr_scripts/screenshot-notify.sh region file-clipboard

# REGION  clipboard only
# bind = $mainMod CTRL, S, exec, sh -lc 'grim -g "$(slurp)" - | wl-copy && dunstify "Screenshot (region) copied to clipboard" -t 3000'
bind = $mainMod CTRL, S, exec, ~/.local/bin/hypr_scripts/screenshot-notify.sh region clipboard

# FULLSCREEN  file + clipboard
# bind = $mainMod SHIFT, S, exec, sh -lc 'dir="$HOME/Pictures/Screenshots"; mkdir -p "$dir"; file="$dir/Screenshot-full-$(date +%F_%H-%M-%S).png"; grim "$file" && wl-copy < "$file" && dunstify "Screenshot (fullscreen)" "$file" -t 3000'
bind = $mainMod SHIFT, S, exec, ~/.local/bin/hypr_scripts/screenshot-notify.sh fullscreen file-clipboard

# FULLSCREEN  clipboard only
# bind = $mainMod CTRL SHIFT, S, exec, sh -lc 'grim - | wl-copy && dunstify "Screenshot (fullscreen) copied to clipboard" -t 3000'
bind = $mainMod CTRL SHIFT, S, exec, ~/.local/bin/hypr_scripts/screenshot-notify.sh fullscreen clipboard

# Alternative (legacy; Print key)
# bind = $mainMod, Print, exec, grim ~/Pictures/Screenshots/screenshot-$(date +%Y-%m-%d_%H-%M-%S).png && notify-send -t 2500 'Screenshot Taken'

# Screenshot (test script)
#bind = $mainMod, Print, exec, $scriptsDir/ScreenShot.sh --now
#bind = $mainMod SHIFT, Print, exec, $scriptsDir/ScreenShot.sh --area
#bind = $mainMod CTRL, Print, exec, $scriptsDir/ScreenShot.sh --in5 #screenshot in 5 secs
#bind = $mainMod CTRL SHIFT, Print, exec, $scriptsDir/ScreenShot.sh --in10 #screenshot in 10 secs
#bind = ALT, Print, exec, $scriptsDir/ScreenShot.sh --active #take screenshot of active window

bind = $mainMod, COMMA, exec, uwsm app -- ~/.local/bin/hypr_scripts/hypr-menu

# Cheatsheet popup (footclient)
bind = $mainMod, slash, exec, ~/.local/bin/hypr_scripts/show-cheatsheet.sh

# Random wallpaper change using swww (active monitor only)
bind = $mainMod SHIFT, W, exec, MONITOR=$(hyprctl monitors -j | jq -r '.[] | select(.focused==true) | .name') && swww img "$(find /home/rx/Pictures/backgrnds/ -type f \( -name '*.jpg' -o -name '*.png' \) 2>/dev/null | shuf -n 1)" --outputs "$MONITOR" --transition-type random && uwsm app -- notify-send -t 2500 "Wallpaper Updated on $MONITOR"

# ============================================================================
# WINDOW FOCUS & MOVEMENT
# ============================================================================

# Alt+Tab cycling (Simple next window)
bind = ALT, Tab, cyclenext,

# Change focus (vim-style)
bind = $mainMod, J, movefocus, l
bind = $mainMod, K, movefocus, d
bind = $mainMod, L, movefocus, u
bind = $mainMod, semicolon, movefocus, r

# Change focus (arrows)
bind = $mainMod, left, movefocus, l
bind = $mainMod, down, movefocus, d
bind = $mainMod, up, movefocus, u
bind = $mainMod, right, movefocus, r

# Move focused window (vim-style)
bind = $mainMod SHIFT, J, movewindow, l
bind = $mainMod SHIFT, K, movewindow, d
bind = $mainMod SHIFT, L, movewindow, u
bind = $mainMod SHIFT, semicolon, movewindow, r

# Move focused window (arrows)
bind = $mainMod SHIFT, left, movewindow, l
bind = $mainMod SHIFT, down, movewindow, d
bind = $mainMod SHIFT, up, movewindow, u
bind = $mainMod SHIFT, right, movewindow, r

# ============================================================================
# WINDOW LAYOUT & DISPLAY
# ============================================================================

# Split orientation (Hyprland uses pseudo-tiling, these are placeholders)
bind = $mainMod, H, togglesplit
bind = $mainMod, V, togglesplit

# Fullscreen
bind = $mainMod, F, fullscreen, 0

# Container layout (Hyprland doesn't have the same layout system as i3)
# These are adapted to Hyprland's model
bind = $mainMod, A, pseudo  # Similar to stacked
# bind = $mainMod, W, pseudo  # Similar to tabbed (moved to walker launcher)
bind = $mainMod, E, togglesplit  # Toggle split

# Toggle tiling / floating
bind = $mainMod SHIFT, space, togglefloating

# Change focus between tiling / floating windows
bind = $mainMod, space, cyclenext

# Toggle borders (Hyprland border cycling)
bind = $mainMod, U, exec, hyprctl keyword general:border_size $((2 - $(hyprctl getoption general:border_size | grep int | awk '{print $2}')))
bind = $mainMod, B, exec, hyprctl keyword general:border_size $((2 - $(hyprctl getoption general:border_size | grep int | awk '{print $2}')))

# Focus parent container (not directly available in Hyprland)
# bind = $mainMod, A, focusparent  # No direct equivalent

# ============================================================================
# WORKSPACE NAVIGATION
# ============================================================================

# Workspace overview (hyprspace plugin)
# Note: This requires the hyprspace plugin to be enabled first
bind = $mainMod, O, overview:toggle

# Move to last workspace
bind = $mainMod, Tab, workspace, previous

# Move to next workspace
bind = $mainMod SHIFT, Tab, workspace, e+1

# ============================================================================
# HYPRLAND SYSTEM CONTROLS
# ============================================================================

# Reload the configuration file
bind = $mainMod SHIFT, C, exec, hyprctl reload

# Restart Hyprland (exit and let display manager restart)
bind = $mainMod SHIFT, R, exec, hyprctl reload

# Toggle STICKY windows
bind = $mainMod SHIFT, X, pin

# Toggle draw terminals on background (custom script)
# bind = $mainMod, Z, exec, ~/.config/i3/bin/draw_area.sh  # Uncomment if script exists

# ============================================================================
# MEDIA KEYS
# ============================================================================

# Volume controls (using wpctl for Wayland audio control)
bindel = , XF86AudioRaiseVolume, exec, wpctl set-volume -l 1 @DEFAULT_AUDIO_SINK@ 5%+
bindel = , XF86AudioLowerVolume, exec, wpctl set-volume @DEFAULT_AUDIO_SINK@ 5%-
bindel = , XF86AudioMute, exec, wpctl set-mute @DEFAULT_AUDIO_SINK@ toggle
bindel = , XF86AudioMicMute, exec, wpctl set-mute @DEFAULT_AUDIO_SOURCE@ toggle

# Music player (ncmpcpp in foot terminal)
bind = $mainMod, M, exec, uwsm app -- footclient -s "$XDG_RUNTIME_DIR/foot.sock" -a ncmpcpp-float --title ncmpcpp ncmpcpp

# Alternative using older i3 scripts (if you have them):
# bind = , XF86AudioRaiseVolume, exec, ~/.config/i3/bin/i3volume.sh --inc
# bind = , XF86AudioLowerVolume, exec, ~/.config/i3/bin/i3volume.sh --dec
# bind = , XF86AudioMute, exec, ~/.config/i3/bin/i3volume.sh --toggle
# bind = , XF86AudioMicMute, exec, ~/.config/i3/bin/i3volume.sh --toggle-mic

# ============================================================================
# RESIZE MODE (using submap)
# ============================================================================

# RESIZE MODE - Press Super+R to enter, then use the keys below
# Exit with Return or Escape
bind = $mainMod, R, exec, ~/.local/bin/hypr_scripts/enter-submap resize "" "Resize"

submap = resize

# Vi movement (basic resize)
binde = , H, resizeactive, -50 0
binde = , J, resizeactive, 0 50
binde = , K, resizeactive, 0 -50
binde = , L, resizeactive, 50 0

# Vi movement with Shift (larger resize)
binde = SHIFT, H, resizeactive, -100 0
binde = SHIFT, J, resizeactive, 0 100
binde = SHIFT, K, resizeactive, 0 -100
binde = SHIFT, L, resizeactive, 100 0

# Vi movement with Control (even larger resize)
binde = CTRL, H, resizeactive, -200 0
binde = CTRL, J, resizeactive, 0 200
binde = CTRL, K, resizeactive, 0 -200
binde = CTRL, L, resizeactive, 200 0

# Vi movement with Shift+Control (maximum resize)
binde = SHIFT CTRL, H, resizeactive, -300 0
binde = SHIFT CTRL, J, resizeactive, 0 300
binde = SHIFT CTRL, K, resizeactive, 0 -300
binde = SHIFT CTRL, L, resizeactive, 300 0

# Arrow keys (basic resize)
binde = , left, resizeactive, -50 0
binde = , down, resizeactive, 0 50
binde = , up, resizeactive, 0 -50
binde = , right, resizeactive, 50 0

# Arrow keys with Shift (larger resize)
binde = SHIFT, left, resizeactive, -100 0
binde = SHIFT, down, resizeactive, 0 100
binde = SHIFT, up, resizeactive, 0 -100
binde = SHIFT, right, resizeactive, 100 0

# Arrow keys with Control (even larger resize)
binde = CTRL, left, resizeactive, -200 0
binde = CTRL, down, resizeactive, 0 200
binde = CTRL, up, resizeactive, 0 -200
binde = CTRL, right, resizeactive, 200 0

# Arrow keys with Shift+Control (maximum resize)
binde = SHIFT CTRL, left, resizeactive, -300 0
binde = SHIFT CTRL, down, resizeactive, 0 300
binde = SHIFT CTRL, up, resizeactive, 0 -300
binde = SHIFT CTRL, right, resizeactive, 300 0

# Exit resize mode
bind = , Return, submap, reset
bind = , Escape, submap, reset

submap = reset

# ============================================================================
# GAPS MODE (using submap)
# ============================================================================

# Enter gaps mode
bind = $mainMod SHIFT, G, exec, ~/.local/bin/hypr_scripts/enter-submap gaps "" "Gaps"

submap = gaps

bind = , O, submap, gaps_outer
bind = , I, submap, gaps_inner
bind = , Return, submap, reset
bind = , Escape, submap, reset

submap = reset

# Outer gaps submap
submap = gaps_outer

binde = , 8, exec, hyprctl keyword general:gaps_out $(($(hyprctl getoption general:gaps_out | grep int | awk '{print $2}') + 5))
binde = , 9, exec, hyprctl keyword general:gaps_out $(($(hyprctl getoption general:gaps_out | grep int | awk '{print $2}') - 5))
bind = , 0, exec, hyprctl keyword general:gaps_out 0
binde = , 6, exec, hyprctl keyword general:gaps_out $(($(hyprctl getoption general:gaps_out | grep int | awk '{print $2}') + 5))
binde = , 7, exec, hyprctl keyword general:gaps_out $(($(hyprctl getoption general:gaps_out | grep int | awk '{print $2}') - 5))
bind = , 5, exec, hyprctl keyword general:gaps_out 0

bind = , Return, submap, reset
bind = , Escape, submap, reset

submap = reset

# Inner gaps submap
submap = gaps_inner

binde = , 8, exec, hyprctl keyword general:gaps_in $(($(hyprctl getoption general:gaps_in | grep int | awk '{print $2}') + 5))
binde = , 9, exec, hyprctl keyword general:gaps_in $(($(hyprctl getoption general:gaps_in | grep int | awk '{print $2}') - 5))
bind = , 0, exec, hyprctl keyword general:gaps_in 0
binde = , 6, exec, hyprctl keyword general:gaps_in $(($(hyprctl getoption general:gaps_in | grep int | awk '{print $2}') + 5))
binde = , 7, exec, hyprctl keyword general:gaps_in $(($(hyprctl getoption general:gaps_in | grep int | awk '{print $2}') - 5))
bind = , 5, exec, hyprctl keyword general:gaps_in 0

bind = , Return, submap, reset
bind = , Escape, submap, reset

submap = reset

# ============================================================================
# POWER MENU (rofi)
# ============================================================================

# Rofi power menu with confirmation dialogs
# Options: Lock, Logout, Suspend, Reboot, Shutdown
bind = $mainMod SHIFT, E, exec, uwsm app -- ~/.local/bin/hypr_scripts/rofi-power-menu

# ============================================================================
# MOUSE BINDINGS
# ============================================================================

# Move/resize windows with mainMod + LMB/RMB
bindm = $mainMod, mouse:272, movewindow
bindm = $mainMod, mouse:273, resizewindow
