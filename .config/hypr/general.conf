# ============================================================================
# HYPRLAND GENERAL LOOK AND FEEL CONFIGURATION
# ============================================================================
# This file contains core appearance settings, window decoration, animations,
# input behavior, and layout settings.
# Reference: https://wiki.hypr.land/Configuring/Variables/

# ============================================================================
# GENERAL SETTINGS - Window gaps, borders, and behavior
# ============================================================================
general {
    # Gaps between windows (in and out)
    gaps_in = 5      # Gaps between tiled windows
    gaps_out = 12    # Gaps between tiled windows and edges

    # Window border
    border_size = 2  # Border thickness in pixels

    # Border colors (supports gradient notation with angle)
    # Format: rgba(RRGGBBAA) or rgba(R,G,B,A)
    col.active_border = rgba(33ccffee) rgba(00ff99ee) 45deg    # Cyan to green gradient
    col.inactive_border = rgba(595959aa)                       # Dark gray

    # Allow resizing windows by clicking/dragging on borders and gaps
    resize_on_border = false

    # Allow tearing for high-refresh monitors (can cause visual artifacts)
    # Only enable if you have a high-refresh monitor and want absolute lowest latency
    allow_tearing = false

    # Layout engine: dwindle (default) or master
    # dwindle: Tree-based tiling, good for productivity
    # master: Master-and-stack layout, good for large screens
    layout = dwindle
}

# ============================================================================
# DECORATION - Window decorations, shadows, blur, rounding
# ============================================================================
decoration {
    # Rounding radius in pixels
    rounding = 5
    # Power of the rounding curve (higher = sharper corners initially)
    rounding_power = 2

    # Window transparency
    active_opacity = 1.0      # Opacity of focused window (1.0 = opaque)
    inactive_opacity = 0.85    # Opacity of unfocused windows

    # Fullscreen window opacity (when maximized)
    fullscreen_opacity = 1.0

    # Shader to make mpvpaper work with hyprlock
    # screen_shader = ~/.config/hypr/shaders/black.frag

    # Shadow configuration
    shadow {
        enabled = true
        range = 4               # Shadow spread distance
        render_power = 3        # Shadow intensity multiplier
        color = rgba(1a1a1aee)  # Shadow color (almost black)
        # color_inactive = rgba(1a1a1a55)  # Optional: different color for inactive windows
    }

    # Blur effect
    blur {
        enabled = true
        size = 3        # Blur radius
        passes = 1      # Number of blur passes (more = more blurred but slower)

        # Vibrancy effect (0.0 = no vibrancy, 1.0 = full vibrancy)
        vibrancy = 0.1696

        # Special blur modes
        # noise = 0.0117  # Add noise to blur (subtle texture)

        # Ignore opacity when blurring
        ignore_opacity = false

        # Blur specific windows
        # xray = false  # Allow windows behind blur to be seen with vibrancy

        # Optimization: blur only if needed
        popups = false  # Don't blur popup windows
    }

    # Disable specific effects for performance (uncomment as needed)
    # noshadow    # Disable shadows entirely
    # nodim       # Disable window dimming
    # noblur      # Disable blur entirely
}

# ============================================================================
# ANIMATIONS - Smooth transitions and effects
# ============================================================================
animations {
    # Master switch: 'yes, please :)' or similar enables all animations
    # Set to 'no' to disable all animations for better performance
    enabled = yes

    # Define custom bezier curves for animation timing
    # Format: bezier = name, x0, y0, x1, y1
    # (Bezier curves from easing function generators)

    bezier = easeOutQuint,   0.23, 1,    0.32, 1     # Smooth deceleration
    bezier = easeInOutCubic, 0.65, 0.05, 0.36, 1     # Ease in and out
    bezier = linear,         0,    0,    1,    1     # No easing
    bezier = almostLinear,   0.5,  0.5,  0.75, 1     # Nearly linear
    bezier = quick,          0.15, 0,    0.1,  1     # Quick snap

    # Define animations
    # Format: animation = name, enabled(0/1), speed(ms), curve, [style]
    # Speed is in milliseconds - lower = faster

    # Global and basic animations
    animation = global,        1, 10,    default      # All animations fallback
    animation = border,        1, 5.39,  easeOutQuint # Border color changes
    animation = windows,       1, 4.79,  easeOutQuint # Window movements
    animation = windowsIn,     1, 4.1,   easeOutQuint, popin 87%     # Window open animation
    animation = windowsOut,    1, 1.49,  linear,       popin 87%     # Window close animation

    # Fade animations
    animation = fadeIn,        1, 1.73,  almostLinear # Fade in effect
    animation = fadeOut,       1, 1.46,  almostLinear # Fade out effect
    animation = fade,          1, 3.03,  quick        # General fade

    # Layer animations (for overlays, menus, etc.)
    animation = layers,        1, 3.81,  easeOutQuint # Layer visibility
    animation = layersIn,      1, 4,     easeOutQuint, fade # Layer appear
    animation = layersOut,     1, 1.5,   linear,       fade # Layer disappear
    animation = fadeLayersIn,  1, 1.79,  almostLinear # Fade layer in
    animation = fadeLayersOut, 1, 1.39,  almostLinear # Fade layer out

    # Workspace animations
    animation = workspaces,    1, 1.94,  almostLinear, fade # Workspace switch
    animation = workspacesIn,  1, 1.21,  almostLinear, fade # Workspace appear
    animation = workspacesOut, 1, 1.94,  almostLinear, fade # Workspace disappear

    # Special animations
    animation = zoomFactor,    1, 7,     quick        # Window zoom factor
}

# ============================================================================
# DWINDLE LAYOUT - Tree-based tiling configuration
# ============================================================================
dwindle {
    # Enable pseudotiling (windows can be resized but maintain tile structure)
    pseudotile = true

    # Preserve the current split ratio when opening new windows
    preserve_split = true

    # Force dwindle to always split in a specific direction
    # Possible values: 0 (default), 1 (always new window to the right/bottom)
    # force_split = 0

    # Whether to preserve split directions when dragging windows
    # smart_split = false
}

# ============================================================================
# MASTER LAYOUT - Master-and-stack layout configuration
# ============================================================================
master {
    # New windows status in master layout
    # master: New windows become master
    # slave: New windows become slave (stacked)
    # auto: First window is master, rest are slaves (default)
    new_status = master

    # New windows go to the front of the stack
    new_on_top = false

    # Orientation: 0 = left master, 1 = top master, 2 = right master, 3 = bottom master
    orientation = 0

    # Mfact: Master factor (0.0-1.0) - how much space master takes
    mfact = 0.55
}

# ============================================================================
# INPUT CONFIGURATION - Keyboard, mouse, and touchpad
# ============================================================================
input {
    # Keyboard layout and options
    kb_rules =             # Leave empty for default rules
    kb_model = pc105+inet
    kb_layout = us
    kb_variant = intl
    kb_options = terminate:ctrl_alt_bksp

    # Example: Multiple keyboard layouts with switcher
    # kb_layout = us,de,fr
    # kb_options = grp:alt_shift_toggle  # Alt+Shift to switch layouts

    # Repeat settings
    repeat_delay = 600     # Milliseconds before key repeat starts
    repeat_rate = 25       # Repeats per second

    # Mouse sensitivity (-1.0 to 1.0, 0 = no modification)
    sensitivity = 0

    # Focus behavior
    follow_mouse = 1       # Focus window under cursor (1 = always, 2 = strict)

    # Numlock on startup
    numlock_by_default = false

    # Override XF86 keys
    force_no_accel = false

    # Touchpad configuration
    touchpad {
        # Natural scrolling (scroll down to scroll down)
        natural_scroll = false

        # Disable touchpad while typing
        disable_while_typing = false

        # Tap-to-click
        tap-to-click = true

        # Tap and drag
        drag_lock = true

        # Clickfinger behavior (2-finger right click, 3-finger middle click)
        clickfinger_behavior = false

        # Middle-click simulation (three-finger tap)
        # tap_button_map = lmr  # Left, middle, right
    }

    # Tablets configuration (if using drawing tablet)
    # tablet {
    #     transform = 0
    # }
}

# ============================================================================
# DEVICE-SPECIFIC CONFIGURATION
# ============================================================================
# Configure specific input devices with unique settings
# Use 'hyprctl devices' to get exact device names

# ELECOM Huge TrackBall configuration
device {
    name = elecom-huge-remapped-1   # this is the remapped evsieve device name. For future reference use 'hyprctl devices' to look for the correct name. Also never remap anything on evsieve that's declared here, so it's passed through and that's how it works
    
    # Acceleration speed (-1.0 to 1.0, matching X11 AccelSpeed 0.2)
    sensitivity = 0.2

    # Hold Fn3 button (BTN_TASK 279) to scroll
    scroll_method = on_button_down
    scroll_button = 279             # Fn3 / BTN_TASK
    
    # Optional tweaks if you want:
    # scroll_factor = 1.0
    # natural_scroll = no

    # Acceleration profile
    accel_profile = flat  # or 'adaptive' for variable acceleration
    #     output = HDMI-A-1
    # }
}

# ============================================================================
# GESTURES - Touchpad gesture configuration
# ============================================================================
# Format: gesture = fingers, direction, command, [mode]
# fingers: 3-5, direction: up/down/left/right, mode: trigger-on-release (optional)

gesture = 3, horizontal, workspace  # 3-finger swipe for workspace switching
# gesture = 4, up, exec, rofi -show drun  # 4-finger swipe up for launcher
# gesture = 4, down, fullscreen, 0       # 4-finger swipe down for fullscreen

# ============================================================================
# MISCELLANEOUS SETTINGS
# ============================================================================
misc {
    # Disable the Hyprland logo/mascot background on startup
    disable_hyprland_logo = false

    # Default wallpaper: -1 (random), 0 (disable), 1 (random hyprland)
    force_default_wallpaper = -1

    # Enable VRR (Variable Refresh Rate) for compatible monitors
    vrr = 0  # 0 = off, 1 = on, 2 = fullscreen only

    session_lock_xray = true

    # Enable focus on mouse hover (for floating windows)
    # focus_on_activate = true

    # Suppress certain window events
    # suppress_portal_warnings = false

    # Allow binding keys that are already bound by the system
    # allow_session_lock_restore = false
}

# ============================================================================
# XWayland-specific configuration
# ============================================================================
# xwayland {
#     # Force zero scaling for XWayland windows (fixes blurriness with fractional scaling)
#     force_zero_scaling = true
# }
